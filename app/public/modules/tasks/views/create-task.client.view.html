<div class="wrapper create-task-wrapper row clearfix" data-ng-controller="TasksController" data-ng-init="createMode()">
	<form class="form-horizontal" novalidate>
		<fieldset>
			<div class="row">
				<div class="col-md-7 col-sm-6 col-xs-12 p-r-1">
					<div class="ibox task-details">
						<div class="ibox-title">
							<h5>New task</h5>
						</div>
						<div class="ibox-content row">
							<div class="col-md-4 col-sm-12">
								<div class="field-group" ng-class="{ error: validationError.title }">
									<label class="field-label" for="title">Title*</label>
									<input type="text" data-ng-model="newTask.title"  id="title"
										   class="form-control input-round-borders" placeholder="Title" required >
									<div ng-show="validationError.title" class="error">
										{{validationError.title.message}}
									</div>
								</div>
								<div class="field-group">
									<label class="field-label" for="templates">Template</label>
									<select class="form-control" id="templates" data-ng-change="loadTaskTemplate(selectedTemplate)"
											data-ng-model="selectedTemplate" data-ng-options="template.title for template in user.templates"
									>
										<option value="">Select template</option>
									</select>
								</div>
								<div class="field-group">
									<label class="field-label" for="priority">Priority*</label>
									<div data-ng-class="'item-priority-' + newTask.priority">
										<select name="priority" id="priority" class="form-control item-priority" data-ng-model="newTask.priority"  data-ng-change="clearSlotsList()">
											<option value="1" class="item-priority-1">Urgent and Important</option>
											<option value="2" class="item-priority-2">Not Urgent but Important</option>
											<option value="3" class="item-priority-3">Urgent but not Important</option>
											<option value="4" class="item-priority-4">Not Urgent and not Important</option>
										</select>
									</div>
									<div ng-show="validationError.priority" class="error">
										{{validationError.priority.message}}
									</div>
								</div>
								<div class="checkbox">
									<label for="isATemplate">
										<input type="checkbox" data-ng-model="newTask.isATemplate" id="isATemplate">Save as template
									</label>
								</div>
								<div class="checkbox">
									<label for="withoutDates">
										<input type="checkbox" data-ng-model="newTask.withoutDates" data-ng-change="clearSlotsList()" id="withoutDates">Task without date
									</label>
								</div>
							</div>
							<div class="col-md-4 col-sm-12">
								<div class="field-group">
									<label class="field-label" for="startDate">Start date</label>
									<div class="input-group ui-datepicker">
										<span class="input-group-addon calendar-btn" data-ng-click="!newTask.withoutDates && openStart($event)">
											<i class="fa fa-calendar"></i>
										</span>

										<input id="startDate" data-ng-disabled="newTask.withoutDates" type="text" class="form-control input-round-borders calendar-input" datepicker-popup="dd.MM.yyyy"
											   data-ng-model="newTask.days.startTime" is-open="opened.startDate" min-date="startDate.minDate" max-date="startDate.maxDate"
											   datepicker-options="dateOptions.startDate" date-disabled="disabled(date, mode)"
											   close-text="Close"
											   ng-change="changeEstimation()"
											   ng-click="openStart($event)" required/>
									</div>
									<!--<timepicker class="select-time" ng-model="newTask.startTime" minute-step="15" show-meridian="true"></timepicker>-->
								</div>
								<div class="field-group form-group-time-select">
									<label class="field-label" for="endDate">End date</label>
									<div class="input-group ui-datepicker">
										<span  class="input-group-addon calendar-btn"
											   data-ng-click="!newTask.withoutDates && openEnd($event)">
											<i class="fa fa-calendar"></i>
										</span>

										<input id="endDate" data-ng-disabled="newTask.withoutDates" type="text" class="form-control input-round-borders calendar-input" datepicker-popup="dd.MM.yyyy"
											   data-ng-model="newTask.days.endTime" is-open="opened.endDate" min-date="endDate.minDate" max-date="endDate.maxDate"
											   datepicker-options="dateOptions.endDate" date-disabled="disabled(date, mode)"
											   close-text="Close"
											   ng-change="changeEstimation()"
											   ng-click="openEnd($event)" required/>
									</div>
									<!--<timepicker class="select-time" ng-model="newTask.endTime" minute-step="15" show-meridian="true"></timepicker>-->
								</div>
								<div class="field-group">
									<label class="field-label" for="estimation">Estimation*</label>
									<div>
										<rzslider rz-slider-model="newTask.estimation"
												  rz-slider-options="slider.options">
										</rzslider>
										<input type="number" id="estimation" min="{{slider.options.floor}}" max="{{slider.options.ceil}}"
											   ng-model="newTask.estimation" data-ng-change="clearSlotsList()" data-ng-pattern="/^\d+$/">
									</div>
								</div>
							</div>
							<div class="col-md-4 col-sm-12">
								<div class="field-group">
									<label class="field-label" for="notes">Notes</label>
									<textarea id="notes" class="form-control" data-ng-model="newTask.notes"></textarea>
									<div ng-show="validationError.notes" class="error">
										{{validationError.notes.message}}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<task-slots class="col-md-5 col-sm-6 col-xs-12" data-ng-init="initCreateSlots()"></task-slots>
			</div>
			<div class="row">
				<div class="btn-holder pull-right">
					<button class="btn btn-white" data-ng-click="cancel()">Cancel</button>
					<button type="submit" data-ng-click="create(newTask)" class="btn btn-primary">Create</button>
				</div>
			</div>
		</fieldset>
	</form>
</div>

<div ng-include="'/modules/calendar/views/calendar.client.view.html'"></div>
